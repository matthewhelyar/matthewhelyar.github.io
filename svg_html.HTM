<!DOCTYPE html>
<html>
<head>
    <script src="./JsBarcode.all.min.js"></script>
    <script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
    <script type="text/javascript">
        window.onload = defaultBarcodes;

        class Group {
            constructor(abo, rhd, text, code) {
                this.abo = abo;
                this.rhd = rhd;
                this.text = text;
                this.code = code;
            }
        };

        class Product {
            constructor(component, pack, irr, special, code, text) {
                this.component = component;
                this.pack = pack;
                this.irr = irr;
                this.special = special;
                this.code = code;
                this.text = text;
            }
        };

        let groups = [];
        let products = [];

        function defaultBarcodes() {
            generateGroupsForm();
            updateProductsForm();
            document.getElementById('bled_date_in').value = dayjs().format('YYYY-MM-DD'); // default bled date is today.
            setExpiryDate();
            generateExpiry()
            generateDin();
            generateGroup(document.querySelector('#group_select').value);
            productTypeChanged(); // indirectly calls generateProduct();

            // old form stuff - being replaced
            generateBarcode(cmv_input.value, 'cmv_barcode_svg', 'codabar');
            generateBarcode(bag_mfg_input.value, 'bag_mfg_barcode_svg', 'code128');
        }

        function generateBarcode(value, element, format) {
            // store existing size attribtues
            let pxPerMm = document.getElementById('mm-scale').offsetWidth / 100;
            let s = document.getElementById(element);
            let x = s.getAttribute('x');
            let y = s.getAttribute('y');
            let h = s.getAttribute('height');
            let w = s.getAttribute('width');

            // generate new SVG
            JsBarcode('#' + element, value, {
                format: format,
                displayValue: false,
                margin: 0,
            });

            // set the SVG's attributes back to the stored ones.
            s.setAttribute('preserveAspectRatio', 'none')
            s.setAttribute('x', x);
            s.setAttribute('y', y);
            s.setAttribute('width', w);
            s.setAttribute('height', h);
        }

        function saveImage(svgObject) {
            // from https://takuti.me/note/javascript-save-svg-as-image/

            const createStyleElementFromCSS = () => {
                const styleRules = [];
                // some stuff commented out as it throws error if there is no .css file in header.
                // assume index.html loads only one CSS file in <header></header>
                //const sheet = document.styleSheets[0];
                //for (let i = 0; i < sheet.cssRules.length; i++)
                //styleRules.push(sheet.cssRules.item(i).cssText);
                const style = document.createElement('style');
                style.type = 'text/css';
                style.appendChild(document.createTextNode(styleRules.join(' ')))
                return style;
            };

            //svgToBlob
            const svg = document.querySelector('#' + svgObject);
            // CSS must be explicitly embedded
            const style = createStyleElementFromCSS();
            svg.insertBefore(style, svg.firstChild);
            const data = (new XMLSerializer()).serializeToString(svg);
            const svgBlob = new Blob([data], {
                type: 'image/svg+xml;charset=utf-8'
            });
            // remove the temporarily injected CSS
            style.remove();

            //blobToImage
            // convert the blob object to a dedicated URL
            const url = URL.createObjectURL(svgBlob);
            // load the SVG blob to a flesh image object
            const img = new Image();
            img.addEventListener('load', () => {
                // (Next step: Image to Canvas)
            });
            img.src = url;

            //imageToCanvas
            img.addEventListener('load', () => {
                // draw the image on an ad-hoc canvas
                const bbox = svg.getBBox();
                const canvas = document.createElement('canvas');
                canvas.width = bbox.width;
                canvas.height = bbox.height;
                const context = canvas.getContext('2d');
                context.drawImage(img, 0, 0, bbox.width, bbox.height);
                URL.revokeObjectURL(url);

                // trigger a synthetic download operation with a temporary link
                const a = document.createElement('a');
                a.download = svgObject + '.png';
                document.body.appendChild(a);
                a.href = canvas.toDataURL();
                a.click();
                a.remove();
            });
        }

        function printSvg(svgObject) {
            // generate a printable version by stripping out just this element into its own page and printing it.
            let popupWinindow;
            //let innerContents = document.getElementById(svgObject).innerHTML;
            let outerContents = document.getElementById(svgObject).outerHTML;
            //console.log(innerContents);
            popupWinindow = window.open('', '_blank', 'width=1000,height=1000,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no');
            popupWinindow.document.open();
            //popupWinindow.document.write('<html><head><style></style></head><body onload="window.print()"><svg>' + innerContents + '</svg></html>');
            popupWinindow.document.write('<html><head><style></style></head><body onload="window.print()">' + outerContents + '</html>');
            popupWinindow.document.close();
        }

        function generateDin() {
            // get form data in upper case without spaces.
            const regexSpace = /\s/g;
            const fin_str = document.getElementById('din_fin_in').value.replace(regexSpace, '').toUpperCase();
            const year_str = document.getElementById('din_year_in').value.replace(regexSpace, '').toUpperCase();
            const seq_str = document.getElementById('din_seq_in').value.replace(regexSpace, '').toUpperCase();

            // check input validity
            if (fin_str.length != 5) {
                alert("FIN string wrong length. Must be 5 characters.\n" + fin_str);
                return;
            };
            if (/[^A-NP-Z0-9]/g.test(fin_str.slice(0, 3))) {
                alert("The first 3 digits of FIN can only contain A-N, P-Z or 0-9\n" + fin_str);
                return;
            };
            if (isNaN(fin_str.slice(3))) {
                alert("The last 2 digits of FIN can only contain numbers\n" + fin_str);
                return;
            };
            if (year_str.length != 2 || isNaN(year_str) || year_str < 0 || year_str > 99) {
                alert("Year string wrong. Must be a 2 digit number between 00 and 99.");
                return;
            };
            if (seq_str.length != 6 || isNaN(seq_str) || year_str < 0 || year_str > 999999) {
                alert("Sequence number string wrong. Must be a 6 digit number between 000000 and 999999.");
                return;
            };

            // concatenate string
            const din_str = fin_str + year_str + seq_str;
            if (din_str.length != 13) {
                alert("DIN string wrong length");
                return;
            };

            // feed back corrected strings into form.
            document.getElementById('din_fin_in').value = fin_str;
            document.getElementById('din_year_in').value = year_str;
            document.getElementById('din_seq_in').value = seq_str;

            // split din into array
            let din_arr = din_str.split("");

            // calculate checksum, both eye readable and numerical
            const charArray = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '*'];
            let sum = 0;
            for (let i = 0; i < din_arr.length; i++) {
                // look up character in array to find equivalent int value (which is array index)
                const value = charArray.findIndex((x) => x == din_arr[i]);
                if (value < 0) {
                    alert("Error: Non-alphanumeric character in checksum calculation. Unable to continue.");
                    return;
                }
                const weight = Math.pow(2, 13 - i);
                const weightedValue = weight * value;
                sum += weightedValue;
            }
            // modulo to get value between 0 and 36
            const checkDigit = (38 - (sum % 37)) % 37;

            // convert back from value to character
            const checkChar = charArray[checkDigit];

            // write checkChar back to form
            document.getElementById('din_cd_in').value = checkChar;

            const barcode = "=" + din_str + (checkDigit + 60);
            const smallBarcode = "&a" + seq_str;
            const eyeReadableFormatted = din_str.slice(0, 4) + ' ' + din_str.slice(4, 7) + ' ' + din_str.slice(7, 10) + ' ' + din_str.slice(10, 13) + '  ' + checkChar;

            // apply code to SVG both eye reable and barcode.
            generateBarcode(barcode, 'din_barcode_svg', 'code128');
            generateBarcode(smallBarcode, 'din_small_barcode_svg', 'code128');
            document.getElementById('din_eye_readable').textContent = eyeReadableFormatted;
        }

        function generateGroupsForm() {
            // do once only
            if (groups.length == 0) {
                groups.push(new Group('O', '+', 'O Pos', '51'));
                groups.push(new Group('O', '-', 'O Neg', '95'));
                groups.push(new Group('A', '+', 'A Pos', '62'));
                groups.push(new Group('A', '-', 'A Neg', '06'));
                groups.push(new Group('B', '+', 'B Pos', '73'));
                groups.push(new Group('B', '-', 'B Neg', '17'));
                groups.push(new Group('AB', '+', 'AB Pos', '84'));
                groups.push(new Group('AB', '-', 'AB Neg', '28'));
            }

            const group_select = document.querySelector('#group_select');

            for (let i = 0; i < groups.length; i++) {
                // check option not already there
                let alreadyExists = false
                for (let o of group_select.options) {
                    if (groups[i].text == o.label) {
                        alreadyExists = true;
                        break;
                    }
                }
                if (alreadyExists) continue;

                // add options
                const newOption = new Option(groups[i].text, i);
                group_select.add(newOption, undefined);
            }
        }

        function generateGroup(groupIndex) {
            const group = groups[groupIndex];
            const rhdCode = '0';
            const reservedCode = '0';
            barcode = "=%" + group.code + rhdCode + reservedCode;
            generateBarcode(barcode, 'group_barcode_svg', 'code128');

            let aboTspan = document.getElementById('abo_tspan');
            let rhdTspan = document.getElementById('rhd_tspan');
            let aboText = document.getElementById('abo_text');
            let rhdText = document.getElementById('rhd_text');
            let rhdBackground = document.getElementById('rhd_background');

            aboTspan.textContent = group.abo;
            switch (group.rhd) {
                case '+':
                    rhdTspan.textContent = "Rh D POSITIVE";
                    rhdBackground.style.fill = '#FFFFFF';
                    rhdText.style.fill = '#000000';
                    rhdTspan.style.fill = '#000000';
                    aboText.style.fill = '#000000';
                    aboText.style.stroke = 'none';
                    break;
                case '-':
                    rhdTspan.textContent = "Rh D NEGATIVE";
                    rhdBackground.style.fill = '#000000';
                    rhdText.style.fill = '#FFFFFF';
                    rhdTspan.style.fill = '#FFFFFF';
                    aboText.style.fill = 'none';
                    aboText.style.stroke = '#000000';
                    break;
            }
        }

        function productTypeChanged() {
            const productType = document.getElementById('product_type_select').value;
            const irradIn = document.getElementById('irradiated_in');
            const specialIn = document.getElementById('special_in')

            switch (productType) {
                case "R":
                    irradIn.disabled = false;
                    specialIn.disabled = false;
                    break;
                case "P":
                    irradIn.disabled = false;
                    specialIn.disabled = false;
                    break;
                case "F":
                case "C":
                    irradIn.checked = false;
                    specialIn.checked = false;
                    irradIn.disabled = true;
                    specialIn.disabled = true;
                    break;
                case "G":
                    irradIn.checked = true;
                    irradIn.disabled = true;
                    specialIn.disabled = false;
                    break;
            }

            setExpiryDate();
            generateExpiry()
            updateProductsForm();
        }

        function irradiatedChanged() {
            updateProductsForm();
        }

        function specialChanged() {
            updateProductsForm();
        }

        function updateProductsForm() {
            if (products.length == 0) {
                // SPN223/11.1 (2022)
                products.push(new Product('R', 0, false, false, '04333', 'RED CELLS IN ADDITIVE SOLUTION LD'));
                products.push(new Product('R', 0, true, false, '44333', 'RED CELLS IN ADDITIVE SOLUTION LD, IRRADIATED'));
                products.push(new Product('R', 0, false, true, '06460', 'RED CELLS THAWED AND WASHED'));
                products.push(new Product('R', 0, false, true, '54263', 'RED CELLS THAWED AND WASHED LD CLOSED SYSTEM PREPARATION'));
                products.push(new Product('R', 0, false, true, '46531', 'RED CELLS WASHED, LD. MANUAL WASH IN SAGM'));
                products.push(new Product('R', 0, true, true, '46532', 'RED CELLS WASHED, LD, IRRADIATED. MANUAL WASH IN SAGM'));
                products.push(new Product('P', 0, false, false, '54288', 'PLATELETS, APHERESIS, LD'));
                products.push(new Product('P', 1, false, false, '54289', 'PLATELETS, APHERESIS, LD'));
                products.push(new Product('P', 2, false, false, '54290', 'PLATELETS, APHERESIS, LD'));
                products.push(new Product('P', 3, false, false, '54291', 'PLATELETS, APHERESIS, LD'));
                products.push(new Product('P', 0, true, false, '54292', 'PLATELETS, APHERESIS, LD, IRRADIATED'));
                products.push(new Product('P', 1, true, false, '54293', 'PLATELETS, APHERESIS, LD, IRRADIATED'));
                products.push(new Product('P', 2, true, false, '54294', 'PLATELETS, APHERESIS, LD, IRRADIATED'));
                products.push(new Product('P', 3, true, false, '54295', 'PLATELETS, APHERESIS, LD, IRRADIATED'));
                products.push(new Product('P', 1, false, false, '54243', 'PLATELETS, APHERESIS IN ADDITIVE SOLUTION PACK 1 LD'));
                products.push(new Product('P', 2, false, false, '54244', 'PLATELETS, APHERESIS IN ADDITIVE SOLUTION PACK 2 LD'));
                products.push(new Product('P', 3, false, false, '54245', 'PLATELETS, APHERESIS IN ADDITIVE SOLUTION PACK 3 LD'));
                products.push(new Product('P', 0, false, false, '54246', 'PLATELETS, APHERESIS IN ADDITIVE SOLUTION LD'));
                products.push(new Product('P', 1, true, false, '54233', 'PLATELETS, APHERESIS IN ADDITIVE SOLUTION, IRRADIATED, PACK 1 LD'));
                products.push(new Product('P', 2, true, false, '54234', 'PLATELETS, APHERESIS IN ADDITIVE SOLUTION, IRRADIATED, PACK 2 LD'));
                products.push(new Product('P', 3, true, false, '54235', 'PLATELETS, APHERESIS IN ADDITIVE SOLUTION, IRRADIATED, PACK 3 LD'));
                products.push(new Product('P', 0, true, false, '54236', 'PLATELETS APHERESIS IN ADDITIVE SOLUTION, IRRADIATED, LD'));
                products.push(new Product('P', 0, false, false, '54477', 'PLATELETS POOLED IN ADDITIVE SOLUTION AND PLASMA, LD'));
                products.push(new Product('P', 0, true, false, '54478', 'PLATELETS POOLED IN ADDITIVE SOLUTION AND PLASMA, IRRADIATED, LD'));
                products.push(new Product('F', 0, false, false, '18300', 'FRESH FROZEN PLASMA, LD'));
                products.push(new Product('F', 0, false, false, '18320', 'FRESH FROZEN PLASMA, LD'));
                products.push(new Product('F', 1, false, false, '18321', 'FRESH FROZEN PLASMA, LD'));
                products.push(new Product('F', 2, false, false, '18322', 'FRESH FROZEN PLASMA, LD'));
                products.push(new Product('C', 0, false, false, '10190', 'CRYOPRECIPITATE, POOLED, LD'));
                products.push(new Product('R', 0, true, true, '40018', 'RED CELLS, CPD, LD, IRRADIATED, FOR INTRAUTERINE TRANSFUSION'));
                products.push(new Product('R', 1, false, false, '56830', 'RED CELLS IN ADDITIVE SOLUTION LD FOR NEONATAL USE'));
                products.push(new Product('R', 2, false, false, '56831', 'RED CELLS IN ADDITIVE SOLUTION LD FOR NEONATAL USE'));
                products.push(new Product('R', 3, false, false, '56832', 'RED CELLS IN ADDITIVE SOLUTION LD FOR NEONATAL USE'));
                products.push(new Product('R', 4, false, false, '56833', 'RED CELLS IN ADDITIVE SOLUTION LD FOR NEONATAL USE'));
                products.push(new Product('R', 5, false, false, '56834', 'RED CELLS IN ADDITIVE SOLUTION LD FOR NEONATAL USE'));
                products.push(new Product('R', 6, false, false, '56835', 'RED CELLS IN ADDITIVE SOLUTION LD FOR NEONATAL USE'));
                products.push(new Product('R', 1, true, false, '46830', 'RED CELLS IN ADDITIVE SOLUTION LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('R', 2, true, false, '46831', 'RED CELLS IN ADDITIVE SOLUTION LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('R', 3, true, false, '46832', 'RED CELLS IN ADDITIVE SOLUTION LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('R', 4, true, false, '46833', 'RED CELLS IN ADDITIVE SOLUTION LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('R', 4, true, false, '46834', 'RED CELLS IN ADDITIVE SOLUTION LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('R', 6, true, false, '46835', 'RED CELLS IN ADDITIVE SOLUTION LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('R', 0, true, true, '40350', 'RED CELLS (CPD), LD, IRRADIATED FOR EXCHANGE TRANSFUSION'));
                products.push(new Product('R', 0, false, false, '54481', 'RED CELLS IN ADDITIVE SOLUTION, LD'));
                products.push(new Product('R', 0, true, false, '54482', 'RED CELLS IN ADDITIVE SOLUTION, LD, IRRADIATED'));
                products.push(new Product('P', 0, true, true, '42964', 'PLATELETS, HYPERCONCENTRATED, IRRADIATED, FOR NEONATAL USE'));
                products.push(new Product('P', 1, false, false, '30031', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 2, false, false, '30032', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 3, false, false, '30033', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 4, false, false, '30034', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 5, false, false, '30035', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 6, false, false, '30036', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 7, false, false, '30037', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 8, false, false, '30038', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD FOR NEONATAL USE'));
                products.push(new Product('P', 1, true, false, '30051', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 2, true, false, '30052', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 3, true, false, '30053', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 4, true, false, '30054', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 5, true, false, '30055', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 6, true, false, '30056', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 7, true, false, '30057', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 8, true, false, '30058', 'PLATELETS IN PLASMA AND ADDITIVE SOLUTION, LD IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('F', 1, false, false, '69601', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 2, false, false, '69602', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 3, false, false, '69603', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 4, false, false, '69604', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 5, false, false, '59711', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 6, false, false, '59712', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 7, false, false, '59713', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 8, false, false, '59714', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 9, false, false, '59715', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 10, false, false, '59716', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 11, false, false, '59717', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('F', 12, false, false, '59718', 'FRESH FROZEN PLASMA, LD FOR NEONATAL USE'));
                products.push(new Product('C', 0, false, false, '29981', 'CRYOPRECIPITATE, LD FOR NEONATAL USE'));
                products.push(new Product('G', 0, true, false, '54395', 'GRANULOCYTES, POOLED, IN ADDITIVE SOLUTION / PLASMA MIX, IRRADIATED'));

                // non-routine products:
                products.push(new Product('P', 0, false, false, '12030', 'PLATELETS APHERESIS LD'));
                products.push(new Product('P', 1, false, false, '58340', 'PLATELETS APHERESIS LD'));
                products.push(new Product('P', 2, false, false, '58341', 'PLATELETS APHERESIS LD'));
                products.push(new Product('P', 3, false, false, '58342', 'PLATELETS APHERESIS LD'));
                products.push(new Product('P', 0, true, false, '42030', 'PLATELETS APHERESIS LD, IRRADIATED'));
                products.push(new Product('P', 1, true, false, '48340', 'PLATELETS APHERESIS LD, IRRADIATED'));
                products.push(new Product('P', 2, true, false, '48341', 'PLATELETS APHERESIS LD, IRRADIATED'));
                products.push(new Product('P', 3, true, false, '48342', 'PLATELETS APHERESIS LD, IRRADIATED'));
                products.push(new Product('P', 0, false, false, '54232', 'PLATELETS POOLED IN PLASMA/ADDITIVE MIXTURE'));
                products.push(new Product('P', 0, true, false, '54232', 'PLATELETS POOLED IN PLASMA/ADDITIVE MIX, IRRADIATED'));
                products.push(new Product('P', 0, false, false, '12769', 'PLATELETS POOLED, LD'));
                products.push(new Product('P', 0, false, false, '12789', 'PLATELETS POOLED, LD'));
                products.push(new Product('P', 0, true, false, '54296', 'PLATELETS POOLED, LD, IRRADIATED'));
                products.push(new Product('P', 0, false, false, '54247', 'PLATELETS POOLED IN ADDITIVE SOLUTION'));
                products.push(new Product('P', 0, true, false, '54237', 'PLATELETS POOLED IN ADDITIVE SOLUTION, IRRADIATED'));
                products.push(new Product('P', 0, true, false, '42769', 'PLATELETS POOLED, LD, IRRADIATED'));
                products.push(new Product('P', 1, false, false, '58231', 'PLATELETS, APHERESIS, PACK 01 LD FOR NEONATAL USE'));
                products.push(new Product('P', 2, false, false, '58232', 'PLATELETS, APHERESIS, PACK 02 LD FOR NEONATAL USE'));
                products.push(new Product('P', 3, false, false, '58233', 'PLATELETS, APHERESIS, PACK 03 LD FOR NEONATAL USE'));
                products.push(new Product('P', 4, false, false, '58234', 'PLATELETS, APHERESIS, PACK 04 LD FOR NEONATAL USE'));
                products.push(new Product('P', 5, false, false, '58235', 'PLATELETS, APHERESIS, PACK 05 LD FOR NEONATAL USE'));
                products.push(new Product('P', 6, false, false, '58236', 'PLATELETS, APHERESIS, PACK 06 LD FOR NEONATAL USE'));
                products.push(new Product('P', 7, false, false, '58237', 'PLATELETS, APHERESIS, PACK 07 LD FOR NEONATAL USE'));
                products.push(new Product('P', 8, false, false, '58238', 'PLATELETS, APHERESIS, PACK 08 LD FOR NEONATAL USE'));
                products.push(new Product('P', 9, false, false, '50778', 'PLATELETS, APHERESIS, PACK 09 LD FOR NEONATAL USE'));
                products.push(new Product('P', 10, false, false, '50779', 'PLATELETS, APHERESIS, PACK 10 LD FOR NEONATAL USE'));
                products.push(new Product('P', 11, false, false, '50780', 'PLATELETS, APHERESIS, PACK 11 LD FOR NEONATAL USE'));
                products.push(new Product('P', 12, false, false, '50781', 'PLATELETS, APHERESIS, PACK 12 LD FOR NEONATAL USE'));
                products.push(new Product('P', 1, true, false, '48231', 'PLATELETS, APHERESIS, PACK 01 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 2, true, false, '48232', 'PLATELETS, APHERESIS, PACK 02 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 3, true, false, '48233', 'PLATELETS, APHERESIS, PACK 03 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 4, true, false, '48234', 'PLATELETS, APHERESIS, PACK 04 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 5, true, false, '48235', 'PLATELETS, APHERESIS, PACK 05 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 6, true, false, '48236', 'PLATELETS, APHERESIS, PACK 06 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 7, true, false, '48237', 'PLATELETS, APHERESIS, PACK 07 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 8, true, false, '48238', 'PLATELETS, APHERESIS, PACK 08 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 9, true, false, '40778', 'PLATELETS, APHERESIS, PACK 09 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 10, true, false, '40779', 'PLATELETS, APHERESIS, PACK 10 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 11, true, false, '40780', 'PLATELETS, APHERESIS, PACK 11 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('P', 12, true, false, '40781', 'PLATELETS, APHERESIS, PACK 12 LD, IRRADIATED FOR NEONATAL USE'));
                products.push(new Product('G', 0, true, true, '46460', 'LEUCOCYTES, BUFFY COAT, IRRADIATED'));
                products.push(new Product('R', 0, false, true, '30002', 'WHOLE BLOOD (CPDA1) AUTOLOGOUS'));

                // need to add:
                // buffy coats
                // apheresis granulocytes
                // non-MB neonatal and paed plasma


                // SPN223/10 (2019) removed items:
                //products.push(new Product('R', 1, false, false, '04216', 'RED CELLS IN ADDITIVE SOLUTION LD PACK 1'));
                //products.push(new Product('R', 2, false, false, '04217', 'RED CELLS IN ADDITIVE SOLUTION LD PACK 2'));
                //products.push(new Product('R', 1, true, false, '04316', 'RED CELLS IN ADDITIVE SOLUTION PK1 LD IRRADIATED'));
                //products.push(new Product('R', 2, true, false, '04417', 'RED CELLS IN ADDITIVE SOLUTION PK2 LD IRRADIATED'));
                //products.push(new Product('F', 1, false, false, '18281', 'FRESH FROZEN PLASMA, LD'));
                //products.push(new Product('F', 2, false, false, '18282', 'FRESH FROZEN PLASMA, LD'));
                //products.push(new Product('C', 0, false, false, '10170', 'CRYOPRECIPITATE, LD'));
                //products.push(new Product('F', 0, false, false, '54271', 'FRESH FROZEN PLASMA PAED USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 1, false, false, '54272', 'FRESH FROZEN PLASMA PAED USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 2, false, false, '54273', 'FRESH FROZEN PLASMA PAED USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 3, false, false, '54274', 'FRESH FROZEN PLASMA PAED USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 1, false, false, '54275', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 2, false, false, '54276', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 3, false, false, '54277', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 4, false, false, '54278', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 5, false, false, '54279', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 6, false, false, '54280', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 7, false, false, '54281', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 8, false, false, '54282', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 9, false, false, '54283', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 10, false, false, '54284', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 11, false, false, '54285', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('F', 12, false, false, '54286', 'FRESH FROZEN PLASMA NEONATAL USE MB TREATED AND REMOVED'));
                //products.push(new Product('C', 0, false, false, '54260', 'CRYOPRECIPITATE, METHYLENE BLUE TREATED AND REMOVED, LD'));
                //products.push(new Product('C', 1, false, false, '54487', 'CRYOPRECIPITATE, METHYLENE BLUE TREATED AND REMOVED, LD'));
                //products.push(new Product('C', 2, false, false, '54488', 'CRYOPRECIPITATE, METHYLENE BLUE TREATED AND REMOVED, LD'));
                //products.push(new Product('C', 3, false, false, '54489', 'CRYOPRECIPITATE, METHYLENE BLUE TREATED AND REMOVED, LD'));
                //products.push(new Product('P', 1, false, false, '54397', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 2, false, false, '54398', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 3, false, false, '54399', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 4, false, false, '54000', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 5, false, false, '54001', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 6, false, false, '54002', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 7, false, false, '54003', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 8, false, false, '54004', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 9, false, false, '54005', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 10, false, false, '54006', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 11, false, false, '54007', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 12, false, false, '54008', 'PLATELETS, APHERESIS, LD FOR NEONATAL USE'));
                //products.push(new Product('P', 1, true, false, '54409', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 2, true, false, '54410', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 3, true, false, '54411', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 4, true, false, '54412', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 5, true, false, '54413', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 6, true, false, '54414', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 7, true, false, '54415', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 8, true, false, '54416', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 9, true, false, '54417', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 10, true, false, '54418', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 11, true, false, '54419', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('P', 12, true, false, '54420', 'PLATELETS, APHERESIS, LD IRRADIATED FOR NEONATAL USE'));
                //products.push(new Product('R', 0, false, true, '04454', 'RED CELLS (CPD) LD'));
                //products.push(new Product('R', 0, true, true, '44454', 'RED CELLS (CPD) LD, IRRADIATED'));
                //products.push(new Product('P', 1, false, true, '29921', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, PACK 1, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 2, false, true, '29922', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, PACK 2, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 3, false, true, '29923', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, PACK 3, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 0, false, true, '29920', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 1, true, true, '29931', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, IRRADIATED, PACK 1, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 2, true, true, '29932', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, IRRADIATED, PACK 2, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 3, true, true, '29933', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, IRRADIATED, PACK 3, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 0, true, true, '29930', 'PLATELETS APHERESIS, EXTENDED LIFE, PATHOGEN INACTIVATED, IRRADIATED, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 0, false, true, '29924', 'PLATELETS POOLED, EXTENDED LIFE, PATHOGEN INACTIVATED, IN ADDITIVE SOLUTION AND PLASMA'));
                //products.push(new Product('P', 0, true, true, '29934', 'PLATELETS POOLED, EXTENDED LIFE, PATHOGEN INACTIVATED, IRRADIATED, IN ADDITIVE SOLUTION AND PLASMA'));


            }

            const product_select = document.querySelector('#product_select');
            const productType = document.getElementById('product_type_select').value;
            const showIrradiated = document.getElementById('irradiated_in').checked;
            const showSpecial = document.getElementById('special_in').checked;

            // clear options list
            product_select.length = 0;

            // update list with only filtered products.
            const filteredProducts = products.filter(x => {
                return x.component === productType &&
                    x.irr === showIrradiated &&
                    x.special === showSpecial
            });

            for (let p of filteredProducts) {
                //// check option not already there - unnecessary if I'm clearing the select each time, but I might not want to do that because it changes the selected item.
                //let alreadyExists = false
                //for (let o of product_select.options) {
                //    if (filteredProducts[i].code == o.value) {
                //        alreadyExists = true;
                //        break;
                //    }
                //}
                //if (alreadyExists) continue;

                // add option
                const text = p.pack > 0 ? p.text + " (" + p.pack + ")" : p.text;

                const newOption = new Option(text, p.code);
                product_select.add(newOption, undefined);
            }

            generateProduct(document.querySelector('#product_select').value);
        }

        function generateProduct(productCode) {
            if (productCode == null || productCode == "") {
                console.log(productCode);
                return;
            }

            const selectedProduct = products.find(x => { return x.code === productCode });
            if (selectedProduct == null) return;

            const barcode = "a0" + selectedProduct.code + "3b";
            generateBarcode(barcode, 'product_barcode_svg', 'codabar');
            generateBarcode(barcode, 'product_barcode_svg_3', 'codabar');

            // will change this to the foreignObject method, but for now like this.
            document.getElementById('product_tspan').textContent = selectedProduct.text;                // to remove later
            document.getElementById('product_tspan_line2').textContent = "";                            // to remove later
            document.getElementById('product_text_fo').textContent = selectedProduct.text;              // new method

            if (selectedProduct.pack < 1) {
                document.getElementById('pack_no_tspan').textContent = "";                              // to remove later
                document.getElementById('pack_no_background').style.fill = "none";                      // to remove later
                document.getElementById('pack_text_fo').textContent = "";                               // new method
                document.getElementById('pack_background_fo').style.fill = "none";                      // new method
            }
            else {
                document.getElementById('pack_no_tspan').textContent = "PACK " + String(selectedProduct.pack).padStart(2, '0'); // to remove later
                document.getElementById('pack_no_background').style.fill = "#000000";                   // to remove later
                document.getElementById('pack_text_fo').textContent = "PACK " + String(selectedProduct.pack).padStart(2, '0');  // new method
                document.getElementById('pack_background_fo').style.fill = "#000000";                   // new method
            }

            let storageText, gradient;
            switch (selectedProduct.component) {
                case 'R':
                    storageText = "STORE AT 4°C ± 2°C";
                    gradient = "#linearGradientFluidRed";
                    break;
                case 'P':
                    storageText = "STORE AT 22°C ± 2°C EXTENDED LIFE<br/>AGITATE GENTLY THROUGHOUT STORAGE";
                    gradient = "#linearGradientFluidYellow";
                    break;
                case 'F':
                    storageText = "STORE FROZEN AT -25°C OR BELOW<br/>TIME THAWED _______ DATE _______";
                    gradient = "#linearGradientFluidYellow";
                    break;
                case 'C':
                    storageText = "STORE FROZEN AT -25°C OR BELOW<br/>USE WITHIN 4 HOURS OF THAWING<br/>TIME THAWED _______ DATE _______";
                    gradient = "#linearGradientFluidYellow";
                    break;
                case 'G':
                    storageText = "DO NOT AGITATE<br/>STORE AT 22°C ± 2°C"
                    gradient = "#linearGradientFluidRed";
                    break;
            }
            document.getElementById('storage_tspan').textContent = storageText; // to remove later
            document.getElementById('storage_text_fo').innerHTML = storageText;  // new method
            document.getElementById('linearGradientFluidUrl1').setAttribute("xlink:href", gradient);
            document.getElementById('linearGradientFluidUrl2').setAttribute("xlink:href", gradient);
        }

        function getDayNumber(date) {
            const date1 = dayjs(date);
            const firstDayOfYear = dayjs(date1.year() + "-01-01");
            return date1.diff(firstDayOfYear, 'day') + 1;
        }

        function bledDateChanged() {
            setExpiryDate();
            generateExpiry();
        }

        function expiryChanged() {
            setBledDate();
            generateExpiry();
        }

        function generateExpiry() {
            const expiryDate = dayjs(document.getElementById('expiry_in').value);
            const bledDate = dayjs(document.getElementById('bled_date_in').value);
            const dayNumberString = String(getDayNumber(expiryDate)).padStart(3, '0');
            const barcode = "a" + expiryDate.year() + dayNumberString + "a";
            generateBarcode(barcode, 'expiry_barcode_svg', 'codabar');
            document.getElementById('expiry_tspan').textContent = expiryDate.format("DD MMM YYYY");
            document.getElementById('date_bled_tspan').textContent = "Date Bled: " + bledDate.format("DD MMM YYYY");
        }

        function setExpiryDate() {
            // sets the expiry date in the form from the bled date.
            const bledDate = dayjs(document.getElementById('bled_date_in').value);

            let shelfLife;
            switch (document.getElementById('product_type_select').value) {
                case 'R':
                    shelfLife = 35;
                    break;
                case 'P':
                    shelfLife = 7;
                    break;
                case 'F':
                case 'C':
                    const dateIn3Years = dayjs((bledDate.year() + 3) + "-" + (bledDate.month() + 1) + "-" + bledDate.date());
                    shelfLife = dateIn3Years.diff(bledDate, 'day');
                    break;
                case 'G':
                    shelfLife = 0;
                    break;
            }
            document.getElementById('expiry_in').value = bledDate.add(shelfLife, 'day').format('YYYY-MM-DD');
        }

        function setBledDate() {
            // sets the bled date in the form from the expiry date.
            const expiryDate = dayjs(document.getElementById('expiry_in').value);

            let shelfLife;
            switch (document.getElementById('product_type_select').value) {
                case 'R':
                    shelfLife = -35;
                    break;
                case 'P':
                    shelfLife = -7;
                    break;
                case 'F':
                case 'C':
                    const dateIn3Years = dayjs((expiryDate.year() - 3) + "-" + (expiryDate.month() + 1) + "-" + expiryDate.date());
                    shelfLife = dateIn3Years.diff(expiryDate, 'day');
                    break;
                case 'G':
                    shelfLife = -0;
                    break;
            }
            document.getElementById('bled_date_in').value = expiryDate.add(shelfLife, 'day').format('YYYY-MM-DD');
        }
    </script>
</head>

<body style="background-color:lightblue; font-family:sans-serif;">

    <div id="mm-scale" style="width:100mm;padding:0px;visibility:hidden;"></div>
    <div>
        <!--<input name="print" type="button" value="Print" onclick="window.print()" />-->
        <input name="print" type="button" value="Print" onclick="printSvg(printable.id)" />
    </div>
    <table id="old_form" height="0">

        <!--<tr>
            <td><label>DIN Barcode: </label></td>
            <td><input id="din_input" name="barcode" type="text" value="=G09562252945276" /></td>
            <td><input name="refresh" type="button" value="Set Barcode" onclick="generateBarcode(din_input.value, 'din_barcode_svg', 'code128')" /></td>
            <td><input name="download" type="button" value="Download" onclick="saveImage('din_barcode_svg')" /></td>
        </tr>
        <tr>
            <td><label>DIN Small Barcode: </label></td>
            <td><input id="din_small_input" name="barcode" type="text" value="&a529452" /></td>
            <td><input name="refresh" type="button" value="Set Barcode" onclick="generateBarcode(din_small_input.value, 'din_small_barcode_svg', 'code128')" /></td>
            <td><input name="download" type="button" value="Download" onclick="saveImage('din_small_barcode_svg')" /></td>
        </tr>
        <tr>
            <td><label>Product Barcode: </label></td>
            <td><input id="product_input" name="barcode" type="text" value="a0568343b" /></td>
            <td><input name="refresh" type="button" value="Set Barcode" onclick="generateBarcode(product_input.value, 'product_barcode_svg', 'codabar')" /></td>
            <td><input name="download" type="button" value="Download" onclick="saveImage('product_barcode_svg')" /></td>
        </tr>
        <tr>
            <td><label>Group Barcode: </label></td>
            <td><input id="group_input" name="barcode" type="text" value="=%9500" /></td>
            <td><input name="refresh" type="button" value="Set Barcode" onclick="generateBarcode(group_input.value, 'group_barcode_svg', 'code128')" /></td>
            <td><input name="download" type="button" value="Download" onclick="saveImage('group_barcode_svg')" /></td>
        </tr>
        <tr>
            <td><label>Expiry Barcode: </label></td>
            <td><input id="expiry_input" name="barcode" type="text" value="a2022353a" /></td>
            <td><input name="refresh" type="button" value="Set Barcode" onclick="generateBarcode(expiry_input.value, 'expiry_barcode_svg', 'codabar')" /></td>
            <td><input name="download" type="button" value="Download" onclick="saveImage('expiry_barcode_svg')" /></td>
        </tr>-->
        <tr>
            <td><label>CMV Barcode: </label></td>
            <td><input id="cmv_input" name="barcode" type="text" value="a8738a" /></td>
            <td><input name="refresh" type="button" value="Set Barcode" onclick="generateBarcode(cmv_input.value, 'cmv_barcode_svg', 'codabar')" /></td>
            <td><input name="download" type="button" value="Download" onclick="saveImage('cmv_barcode_svg')" /></td>
        </tr>
        <tr>
            <td><label>Bag manufacturer Barcode: </label></td>
            <td><input id="bag_mfg_input" name="barcode" type="text" value="=)0MAVXX603B" /></td>
            <td><input name="refresh" type="button" value="Set Barcode" onclick="generateBarcode(bag_mfg_input.value, 'bag_mfg_barcode_svg', 'code128')" /></td>
            <td><input name="download" type="button" value="Download" onclick="saveImage('bag_mfg_barcode_svg')" /></td>
        </tr>
    </table>

    <table id="smart_din" style="border-collapse: collapse;text-align:center">
        <tr>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">DIN code</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px">Facility ID</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px">Year</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px">Sequence Number</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px">Checkdigit</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px" />
        </tr>
        <tr>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px" />
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><input id="din_fin_in" type="text" value="G0956" size="5" style="text-align:center" /></td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><input id="din_year_in" type="text" value="22" size="2" style="text-align:center" /></td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><input id="din_seq_in" type="text" value="529452" size="6" style="text-align:center" /></td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><input id="din_cd_in" type="text" value="" size="1" disabled=disabled style="text-align:center" /></td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><input id="din_go" type="submit" value="Set DIN" onclick="generateDin()" /></td>
        </tr>
    </table>

    <table id="smart_group" style="border-collapse: collapse;text-align:center">
        <tr>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">Group</th>
        </tr>
        <tr>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><select id="group_select" onchange="generateGroup(group_select.value)" /></td>
        </tr>
    </table>

    <table id="smart_product" style="border-collapse: collapse;text-align:center">
        <tr>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">Product Type</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">Irradiated</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">Special</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">Product</th>
        </tr>
        <tr>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px">
                <select id="product_type_select" onchange="productTypeChanged()">
                    <option value="R">Red Cells</option>
                    <option value="P">Platelets</option>
                    <option value="F">Fresh Frozen Plasma</option>
                    <option value="C">Cryoprecipitate</option>
                    <option value="G">Granulocytes</option>
                </select>
            </td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><input id="irradiated_in" type="checkbox" onchange="irradiatedChanged()" /></td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><input id="special_in" type="checkbox" onchange="specialChanged()" /></td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"><select id="product_select" onchange="generateProduct(product_select.value)" /></td>
        </tr>
    </table>

    <table id="smart_dates" style="border-collapse: collapse;text-align:center">
        <tr>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">Bled Date</th>
            <th style="border: 1px solid black; padding:2px 5px 2px 5px;">Expiry Date</th>
        </tr>
        <tr>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"> <input type="date" id="bled_date_in" onchange="bledDateChanged()" required=required /></td>
            <td style="border: 1px solid black; padding:2px 5px 2px 5px"> <input type="date" id="expiry_in" onchange="expiryChanged()" required=required /></td>
        </tr>
    </table>






    <div id="printable">


        <!-- SVG 1.1 doesn't support text wrapping in any way and I'm having problems with line widths changing depending on OS, browser and zoom level. -->
        <!-- Trying to fix that using HTML for text -->
        <!-- Units are not consistent between px and mm. should use mm to keep scale with rest of svg on different resolution displays -->
        <!-- Have to scale down 94% to get text to compress a bit more than condensed does. Probably won't be the same on other platforms though. -->
        <!-- Also scaling is inconsistent on original label, so some things are unscaled by 106% -->





        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" id="blood_unit" width="523.948" height="931.308" version="1.1" viewBox="0 0 138.628 246.409">
        <defs id="defs2">
        <linearGradient id="linearGradientFluidRed">
        <stop offset="0" style="stop-color:#3d0a17;stop-opacity:1" />
        <stop offset=".25" style="stop-color:#661424;stop-opacity:1" />
        <stop offset=".75" style="stop-color:#671424;stop-opacity:1" />
        <stop offset="1" style="stop-color:#3b0b15;stop-opacity:1" />
        </linearGradient>
        <linearGradient id="linearGradientFluidYellow">
        <stop offset="0" style="stop-color:#ccae57; stop-opacity: 1" />
        <stop offset=".25" style="stop-color:#936e17; stop-opacity: 1" />
        <stop offset=".75" style="stop-color:#936e17; stop-opacity: 1" />
        <stop offset="1" style="stop-color:#ccae57; stop-opacity: 1" />
        </linearGradient>
        <linearGradient id="linearGradientRedTubes">
        <stop offset="0" style="stop-color:#000;stop-opacity:0" />
        <stop offset="1" style="stop-color:#3f0000;stop-opacity:.75" />
        </linearGradient>
        <linearGradient id="linearGradientGreyTubes">
        <stop offset="0" style="stop-color:#000;stop-opacity:0" />
        <stop offset="1" style="stop-color:#000;stop-opacity:.75" />
        </linearGradient>
        <linearGradient xlink:href="#linearGradientRedTubes" id="linearGradientRedTubesUrl1" x1="70.511" x2="75.318" y1="50.532" y2="50.532" gradientTransform="matrix(.62296 0 0 .43732 27.47 35.205)" gradientUnits="userSpaceOnUse" />
        <linearGradient xlink:href="#linearGradientRedTubes" id="linearGradientRedTubesUrl2" x1="70.511" x2="75.318" y1="50.532" y2="50.532" gradientTransform="matrix(.62296 0 0 .43732 76.785 34.368)" gradientUnits="userSpaceOnUse" />
        <linearGradient xlink:href="#linearGradientGreyTubes" id="linearGradientGreyTubesUrl1" x1="70.511" x2="75.318" y1="50.532" y2="50.532" gradientTransform="matrix(.61282 0 0 .53627 77.788 15.884)" gradientUnits="userSpaceOnUse" />
        <linearGradient xlink:href="#linearGradientGreyTubes" id="linearGradientGreyTubesUrl2" x1="70.511" x2="75.318" y1="50.532" y2="50.532" gradientTransform="matrix(.61282 0 0 .52547 29.002 16.468)" gradientUnits="userSpaceOnUse" />
        <linearGradient xlink:href="#linearGradientFluidRed" id="linearGradientFluidUrl1" x1="34.375" x2="159.972" y1="123.867" y2="123.867" gradientUnits="userSpaceOnUse" />
        <linearGradient xlink:href="#linearGradientFluidRed" id="linearGradientFluidUrl2" x1="94.334" x2="98.851" y1="60.173" y2="60.173" gradientUnits="userSpaceOnUse" />
            </defs>
        <g style="display:inline;opacity:1" transform="translate(-28.222 -11.421)">
        <path d="M40.847 66.876c3.575-3.176 5.277-4.591 9.861-4.71 4.583-.118 7.267-3.032 7.206-7.816-.063-4.924-.084-32.467-.036-36.977.048-4.511.785-5.149 5.984-5.117 5.2.032 5.844.82 6.216 4.596.372 3.777.859 5.9 2.1 5.867 1.243-.033 1.758-1.772 2.285-5.688.528-3.916 1.005-4.637 6.115-4.71 5.11-.072 5.652.636 5.632 5.289-.02 4.652-.12 11.764-.198 21.06-.097 11.534-.484 11.832 6.702 11.87 1.35.008 1.52-1.03 1.756-4.493.236-3.462.269-4.44.269-4.44l5.46.263s-.078.547-.305 4.311c-.226 3.765.248 4.344 1.145 4.361 5.741.112 6.01.083 6.003-6.487-.006-6.57-.021-22.546-.028-26.952-.006-4.406.428-4.92 5.838-4.987 5.41-.067 5.948.453 6.41 4.473.463 4.02.607 5.153 1.654 5.156 1.048.003 1.343-.963 1.851-5.114.508-4.15 1.08-4.517 6.081-4.567 5.003-.05 6.199.264 6.244 4.813.045 4.548.023 22.319-.11 37.483-.043 4.369 3.247 7.806 7.345 7.799 4.51-.007 7.058 2.594 9.857 5.074 2.799 2.48 6.34 5.435 9.884 8.996 3.544 3.562 4.693 5.437 4.643 8.916-.098 6.959-.188 135.756-.188 135.756s.262 9.426-7.136 13.681c-7.399 4.256-37.87 21.088-37.87 21.088s-3.386 1.974-5.678 1.908c-2.291-.065-36.683-.14-36.683-.14s-2.291-.262-3.928-1.113c-1.637-.852-23.886-12.418-35.945-18.398-7.398-3.67-10.816-8.192-10.79-12.845.029-5.525-.02-135.317-.019-140.93.002-5.613.977-6.663 3.671-9.236 2.695-2.572 5.128-4.864 8.702-8.04z" style="opacity:1;fill:#fff;fill-opacity:.75;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m88.02 249.792-3.151-.015s-1.272-.036-1.277 1.277c-.005 1.313 1.251 1.28 1.251 1.28l26.279.128s1.353 0 1.35-1.33c-.003-1.328-1.355-1.334-1.355-1.334l-3.267-.008" style="opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="M61.871 60.431s1.585.12 3.241-.655c1.914-.895 3.409-1.851 3.409-1.851-3.736.002-6.866-2.785-6.42-8.09.445-5.306.82-12.475 1.075-15.719.255-3.244 1.886-6.187 4.214-6.187 2.327 0 2.41 1.216 4.55 1.216 2.14 0 2.264-1.32 4.56-1.32s3.783 3.247 3.99 6.23c.205 2.984.7 11.146.976 15.775.277 4.628-1.81 7.842-6.043 7.901 0 0 3.308 2.667 6.516 2.733 3.208.065 6.525-.01 6.525-.01.7-.007 1.285-.706 1.419-1.294 0 0 .114-.602.142-1.948.042-2.093-.446-3.593-1.735-3.64a1759.33 1759.33 0 0 1-5.058-.032" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="M72.17 22.766s-.122 14.111-.122 18.612c0 4.5-.036 5.133-1.413 6.51-1.377 1.377-4.695 1.16-4.695 1.16" style="opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="M109.666 53.323c-2.047-.02-2.827-.012-4.468-.02-1.535-.016-1.722 2.07-1.719 3.658.004 1.703 0 2.455.508 2.88.507.426 1.096.475 1.67.475.572 0 6.104-.016 6.104-.016s1.13.164 2.587-.704c1.456-.867 3.2-2.272 3.2-2.272-3.97-.065-6.754-3.436-6.458-7.268.296-3.83 1.016-13.837 1.26-16.698.245-2.86 1.805-5.582 4.256-5.602 2.452-.02 2.49 1.248 4.275 1.258 1.785.01 1.893-1.232 4.508-1.235 2.615-.003 4.052 2.616 4.263 5.485.21 2.87.852 12.657 1.031 16.724.178 4.067-2.945 7.085-6.42 7.273 0 0 .89.816 2.083 1.596 1.219.796 2.053.986 3.068 1.034 1.076.05 1.564.016 1.564.016" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <circle cx="107.097" cy="57.37" r="1.489" style="opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <circle cx="86.031" cy="57.419" r="1.489" style="opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="M120.917 21.792s-.064 15.886-.114 19.64c-.05 3.755.043 5.234 1.27 6.363 1.227 1.129 4.295.912 4.295.912" style="opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m118.56 25.638-8.398-.08" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m111.978 23.385-1.726 2.18 1.816 2.178" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m130.02 23.368 2.01 2.236-2.089 2.134" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m123.06 25.587 9.062-.023" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m69.915 25.942-9.216-.04" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m62.761 23.722-2.043 2.225 2.134 1.997" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m80.9 24.005 1.998 1.952-1.907 1.998" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m74.338 25.964 8.63-.009" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m57.881 19.475 7.348-7.19" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m57.836 24.605 11.048-11.41" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m65.69 21.7 4.512-4.421" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m68.274 23.749 2.254-2.03" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m60.333 22.063-2.406-2.224" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m68.232 23.743-10.093-9.435" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="M70.385 20.79c-.136-.228-9.109-8.453-9.109-8.453" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m73.672 21.336 8.433-8.953" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m76.21 23.884 9.487-10.123" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m74.362 17.542 4.117 3.89" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m75.245 13.863 10.994 10.563" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m79.03 12.449 7.187 6.644" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m83.291 21.841 2.724-2.95" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m76.255 23.884-2.588-2.36" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m107.092 24.197 10.73-11.213" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m119.951 21.064-2.554 2.679-10.023-9.616" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m109.86 21.473-2.632-2.633 6.593-6.638" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m110.86 12.166 9.013 8.964" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m115.025 21.473 4.25-4.693" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m121.755 20.656 2.633 2.95 10.115-9.977" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m135.02 24.61-11.141-11.595" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m127.904 12.125 6.613 6.664-2.656 2.604" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m126.84 21.382-4.162-4.302" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m121.857 20.82 8.977-8.79" style="opacity:.5;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="m68.61 50.377-.005-15.713 6.705-.027.02 15.663" style="opacity:1;fill:none;stroke:#000;stroke-width:.5;stroke-opacity:1" />
        <path d="m117.587 50.52.028-16.125 6.52.04.028 15.97" style="opacity:1;fill:none;stroke:#000;stroke-width:.5;stroke-opacity:1" />
        <path d="M162.992 158.269v34.401" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M162.897 101.381v34.401" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M31.877 158.272v34.4" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M31.798 101.369v34.4" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M32.636-101.37a.84.84 0 0 1-.42.728.84.84 0 0 1-.84 0 .84.84 0 0 1-.421-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" transform="scale(1 -1)" />
        <path d="M32.71-158.283a.84.84 0 0 1-.42.728.84.84 0 0 1-.842 0 .84.84 0 0 1-.42-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" transform="scale(1 -1)" />
        <path d="M163.717-101.377a.84.84 0 0 1-.42.728.84.84 0 0 1-.841 0 .84.84 0 0 1-.42-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" transform="scale(1 -1)" />
        <path d="M163.829-158.27a.84.84 0 0 1-.42.727.84.84 0 0 1-.841 0 .84.84 0 0 1-.42-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" transform="scale(1 -1)" />
        <path d="M32.626 135.773a.84.84 0 0 1-.42.728.84.84 0 0 1-.841 0 .84.84 0 0 1-.42-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M32.715 192.677a.84.84 0 0 1-.42.728.84.84 0 0 1-.841 0 .84.84 0 0 1-.42-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M163.749 135.763a.84.84 0 0 1-.42.728.84.84 0 0 1-.841 0 .84.84 0 0 1-.42-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M163.796 192.653a.84.84 0 0 1-.42.728.84.84 0 0 1-.841 0 .84.84 0 0 1-.42-.728" style="opacity:.5;fill:none;fill-opacity:1;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M87.111 49.707c5.925 4.023 12.785 3.999 18.904.368" style="opacity:1;fill:none;fill-opacity:.75;stroke:#000;stroke-width:.499999;stroke-dasharray:none;stroke-opacity:1" />
  </g>
        <g style="display:inline;opacity:1" transform="translate(-28.222 -11.421)">
        <path d="M35.173 89.515s.033-9.313 9.456-12.525a1311.5 1311.5 0 0 1 21.019-6.944s1.389-.232 1.527-1.574c.14-1.343.14-2.917.556-3.24.417-.325.833-1.39.833-1.714 0-.324.047-13.148.047-13.148l6.716-.088.092 13.051s.06.817.934 1.25c.456.225.806 1.148.957 1.533.412 1.05 1.176 1.406 2.55 1.245 2.095-.246 4.028-.602 6.575-.834 2.546-.231 4.027-.277 4.444-.972.417-.694.88-1.065 1.528-1.296.648-.232 1.57-.47 1.662-1.164.093-.694.092-6.27.092-6.27l.667-.017s.584-11.352 1.005-17.132c.437-6.013 1.008-13.151 1.224-19.138.195-5.34.272-10.898-.53-17.621l3.75.092s.463 9.861.232 17.269c-.232 7.407-.649 13.981-1.25 21.851a418.413 418.413 0 0 0-.853 14.668l.714.015-.047 6.197s-.138.74.741.88c.88.138 1.898.509 2.408 1.203.509.695.787 1.019 1.759 1.158.972.138 2.407 0 6.157.463 3.75.462 5.324.694 5.695-.278.37-.972.463-1.39.926-1.852.462-.463.91-.787.91-1.574s-.109-12.537-.109-12.537l6.606-.01.092 12.5s.325.926.88 1.482c.556.556 1.111 1.019 1.065 2.13-.046 1.11-.463 2.453 1.481 3.009 1.945.555 10.417 2.87 14.445 4.305 4.027 1.436 8.75 3.565 8.75 3.565s8.101 3.472 8.101 14.49c0 11.02.741 125.972.741 125.972s.278 11.25-9.028 15.046c-9.305 3.797-18.657 7.686-32.962 10.232-14.306 2.546-31.296 1.852-42.454-.278-11.157-2.13-16.666-4.12-24.213-6.99-7.546-2.871-15.419-6.806-15.462-15.278-.225-43.35-.084-87.784-.43-131.132z" style="opacity:1;fill:url(#linearGradientFluidUrl1);fill-opacity:1;stroke:#000;stroke-width:.5;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
        <path d="M70.063 50.465h4.365v12.797h-4.365z" style="fill:url(#linearGradientRedTubesUrl1);fill-opacity:1;stroke:none;stroke-width:.138317" transform="matrix(1 .00073 .01261 .99992 0 0)" />
        <path d="M119.378 49.628h4.365v12.797h-4.365z" style="display:inline;fill:url(#linearGradientRedTubesUrl2);fill-opacity:1;stroke:none;stroke-width:.138317" transform="matrix(.99997 .00826 .00508 .99999 0 0)" />
        <path d="M119.688 34.597h4.294v15.692h-4.294z" style="display:inline;fill:url(#linearGradientGreyTubesUrl1);fill-opacity:1;stroke:none;stroke-width:.151916" />
        <path d="M70.902 34.805h4.294v15.376h-4.294z" style="display:inline;fill:url(#linearGradientGreyTubesUrl2);fill-opacity:1;stroke:none;stroke-width:.150378" />
        <path d="m94.403 57.056 4.448.011-.035 6.224-4.482-.057z" style="fill:url(#linearGradientFluidUrl2);fill-opacity:1;stroke:none;stroke-width:.076;stroke-dasharray:none;stroke-opacity:1" />
  </g>
        <g style="display:inline;opacity:1" transform="translate(-28.222 -11.421)">
        <rect width="109.305" height="108.965" x="43.858" y="101.146" rx="6" style="display:inline;opacity:1;fill:#fff;fill-opacity:1;stroke:#000;stroke-width:.264583" />
        <svg id="din_barcode_svg" width="39.371" height="14.722" x="56.598" y="108.565" />
        <text xml:space="preserve" x="75.663" y="107.036" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:4.5861px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="din_eye_readable" x="75.663" y="107.036" style="text-align:center;text-anchor:middle;stroke-width:.265">G095 622 529 452  G</tspan></text>
        <path d="M89.957 103.151h4.807v4.391h-4.807z" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.272598;stroke-dasharray:none;stroke-opacity:1" />
        <svg id="bag_mfg_barcode_svg" width="43.333" height="6.991" x="50.555" y="196.897">
        <path d="M0 0h43.333v6.991H0z" style="opacity:1;fill:green;fill-opacity:1;stroke:#000;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1" />
    </svg>
        <text xml:space="preserve" x="72.083" y="207.036" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:3.52778px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan15094" x="72.083" y="207.036" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:3.52778px;font-family:Arial;-inkscape-font-specification:Arial;stroke-width:.265">0MAVXX603B</tspan></text>
        <text xml:space="preserve" x="127.126" y="200.341" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:3.48775px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;display:inline;fill:#000;fill-opacity:1;stroke:none;stroke-width:.256436;stroke-dasharray:none;stroke-opacity:1" transform="scale(.96769 1.0334)"><tspan id="tspan15094-2" x="127.126" y="200.341" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:3.48775px;font-family:&quot;Courier New&quot;;-inkscape-font-specification:&quot;Courier New Bold&quot;;stroke-width:.256437">11424511BM</tspan></text>
        <text xml:space="preserve" x="72.752" y="195.642" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:3.52778px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;display:inline;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan15094-9" x="72.752" y="195.642" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:3.52778px;font-family:Arial;-inkscape-font-specification:Arial;stroke-width:.265">VXX603B</tspan></text>
        <text xml:space="preserve" x="60.787" y="195.184" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:2.82222px;font-family:Arial;-inkscape-font-specification:Arial;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan15142" x="60.787" y="195.184" style="font-size:2.82222px;stroke-width:.265">REF</tspan></text>
        <path d="M57.314 192.591h6.806v3.426h-6.806z" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1" />
        <text xml:space="preserve" x="97.499" y="207.823" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:9.87778px;font-family:Arial;-inkscape-font-specification:Arial;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan15150" x="97.499" y="207.823" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:condensed;font-size:9.87778px;font-family:Arial;-inkscape-font-specification:&quot;Arial Condensed&quot;;fill:#000;fill-opacity:1;stroke:none;stroke-width:.265">0</tspan></text>
        <path d="M98.657 190.878v-14.86" style="opacity:1;fill:#000;fill-opacity:1;stroke:#000;stroke-width:.264999;stroke-dasharray:.794997,.794997;stroke-dashoffset:0;stroke-opacity:1" />
  </g>
        <g style="display:inline" transform="translate(-28.222 -11.421)">
        <path id="product_label" d="M44.365 123.967h55.402v52.089H44.365z" style="display:inline;opacity:1;fill:#fff;fill-opacity:1;stroke:silver;stroke-width:.264583;stroke-opacity:1" />
        <path d="M44.369 157.07h55.267" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.264583;stroke-opacity:1" />
        <text xml:space="preserve" x="45.759" y="127.102" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial, Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264583"><tspan id="product_tspan" x="45.759" y="127.102">RED CELLS IN ADDITIVE SOLUTION, LD</tspan><tspan id="product_tspan_line2" x="45.759" y="131.071">FOR NEONATAL USE</tspan></text>
        <text xml:space="preserve" x="43.913" y="149.637" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:2.22959px;font-family:Bahnschrift;-inkscape-font-specification:&quot;Bahnschrift, @wdth=75.0&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;font-variation-settings:&quot;wdth&quot;75;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.278698" transform="scale(1.05335 .94935)"><tspan id="tspan49706" x="43.913" y="149.637" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:condensed;font-family:Bahnschrift;-inkscape-font-specification:&quot;Bahnschrift Condensed&quot;">Always check patient/component compatibility/identity</tspan><tspan id="tspan49710" x="43.913" y="152.424" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:condensed;font-family:Bahnschrift;-inkscape-font-specification:&quot;Bahnschrift Condensed&quot;">Inspect pack for signs of deterioration or damage</tspan><tspan id="tspan49899" x="43.913" y="155.211" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:condensed;font-family:Bahnschrift;-inkscape-font-specification:&quot;Bahnschrift Condensed&quot;">Risk of adverse reaction/infection, Including vCJD</tspan></text>
        <text xml:space="preserve" x="83.4" y="155.291" style="font-weight:700;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264583"><tspan id="tspan9848" x="83.4" y="155.291" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:3.175px;font-family:Bahnschrift;-inkscape-font-specification:Bahnschrift;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264583">50 mL</tspan></text>
        <text xml:space="preserve" x="83.207" y="151.327" style="font-weight:700;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;display:inline;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264583"><tspan id="tspan9848-8" x="83.207" y="151.327" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264583">Volume</tspan></text>
        <text xml:space="preserve" x="45.799" y="134.769" style="font-style:normal;font-variant:normal;font-weight:400;font-size:2.82222px;line-height:125%;font-family:Calibri;text-align:start;letter-spacing:0;word-spacing:0;text-anchor:start;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264583"><tspan id="tspan10741" x="45.799" y="134.769" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:2.82222px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;stroke-width:.264583"><tspan id="storage_tspan" dx="0 0 0 0 0 0 0 0 0 0 0.32151294 0 0 0 0 0 0 0 0" dy="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:2.82222px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;fill:#000;stroke-width:.264583">STORE AT 4°C ± 2°C </tspan></tspan></text>
        <svg id="product_barcode_svg" width="24.019" height="7.951" x="46.482" y="148.23" />
        <text xml:space="preserve" x="41.652" y="176.541" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:1.85479px;font-family:&quot;Courier New&quot;;-inkscape-font-specification:&quot;Courier New Bold&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:start;text-anchor:start;opacity:1;fill:none;fill-opacity:1;fill-rule:nonzero;stroke:#000;stroke-width:.232212;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(1.11106 .90004)"><tspan id="tspan25414" x="41.652" y="176.541" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:1.85479px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:.232213">This component was collected in CPD anticoagulant and is</tspan><tspan id="tspan25418" x="41.652" y="178.903" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:1.85479px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:.232213">suspended in 105 millilitres of additive solution of the </tspan><tspan id="tspan26146" x="41.652" y="181.266" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:1.85479px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:start;text-anchor:start;fill:#000;fill-opacity:1;stroke:none;stroke-width:.232213">following composition. </tspan></text>
        <text xml:space="preserve" x="42.577" y="180.274" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:1.81532px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:start;text-anchor:start;opacity:1;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:.227271;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(1.08693 .92002)"><tspan id="tspan26148" x="42.577" y="180.274" style="stroke-width:.227272">Sodium Chloride</tspan><tspan id="tspan26152" x="42.577" y="182.543" style="stroke-width:.227272">Adenine</tspan><tspan id="tspan26154" x="42.577" y="184.812" style="stroke-width:.227272">Anhydrous Glucose</tspan><tspan id="tspan26156" x="42.577" y="187.082" style="stroke-width:.227272">Mannitol</tspan></text>
        <text xml:space="preserve" x="64.199" y="186.718" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:1.85839px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:start;text-anchor:start;opacity:1;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:.232663;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(1.13898 .87798)"><tspan id="tspan26158" x="64.199" y="186.718" style="stroke-width:.232664">mmols/l</tspan><tspan id="tspan26162" x="64.199" y="189.041" style="stroke-width:.232664">150.0</tspan><tspan id="tspan26164" x="64.199" y="191.364" style="stroke-width:.232664">1.25</tspan><tspan id="tspan26166" x="64.199" y="193.687" style="stroke-width:.232664">45.4</tspan><tspan id="tspan26168" x="64.199" y="196.01" style="stroke-width:.232664">28.8</tspan></text>
        <text xml:space="preserve" x="87.039" y="173.961" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:2.63038px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:start;text-anchor:start;opacity:1;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:.246986;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(1.01286 .9873)"><tspan id="tspan26170" x="87.039" y="173.961" style="font-size:2.63038px;stroke-width:.246986">DO NOT</tspan><tspan id="tspan26174" x="87.039" y="177.249" style="font-size:2.63038px;stroke-width:.246986">VENT</tspan></text>
        <path id="pack_no_background" d="M76.006 148.119h18.237v4.392H76.006z" style="display:inline;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264583" />
        <text xml:space="preserve" x="76.155" y="151.938" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:3.39376px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:start;text-anchor:start;display:inline;opacity:1;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:.254932;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" transform="scale(1.00487 .99515)"><tspan id="pack_no_tspan" x="76.155" y="151.938" style="font-size:3.39376px;fill:#fff;fill-opacity:1;stroke-width:.254933">PACK 05</tspan></text>
  </g>
        <g style="display:inline" transform="translate(-28.222 -11.421)">
        <rect id="group_label" width="43.688" height="100.976" x="100.976" y="102.166" rx="2" style="display:inline;opacity:1;fill:#fff;fill-opacity:1;stroke:silver;stroke-width:.264583;stroke-opacity:1" />
        <svg id="group_barcode_svg" width="27.467" height="11.231" x="102.138" y="118.15" />
        <svg id="din_small_barcode_svg" width="27.467" height="11.231" x="102.138" y="106.308" />
        <path id="rhd_background" d="M101.536 151.803h42.425v6.564h-42.425z" style="display:inline;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:1;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M100.972 169.875h43.769" style="opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.265;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M100.972 192.518h43.769" style="display:inline;fill:none;fill-opacity:1;stroke:#000;stroke-width:.265;stroke-dasharray:none;stroke-opacity:1" />
        <path d="M100.972 197.448h43.769" style="display:inline;fill:none;fill-opacity:1;stroke:#000;stroke-width:.265;stroke-dasharray:none;stroke-opacity:1" />
        <svg id="expiry_barcode_svg" width="26.543" height="5.959" x="111.589" y="162.942" />
        <g>
        <text xml:space="preserve" id="rhd_text" x="122.572" y="156.95" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:5.29167px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;text-align:start;text-anchor:start;display:inline;opacity:1;fill:#fff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-dasharray:none;stroke-opacity:1"><tspan id="rhd_tspan" x="122.572" y="156.95" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:5.29167px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;text-align:center;text-anchor:middle;fill:#fff;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-opacity:1">Rh D NEGATIVE</tspan></text>
        <text xml:space="preserve" id="abo_text" x="122.192" y="149.937" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:26.8111px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:center;text-anchor:middle;display:inline;opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:1.165;stroke-dasharray:none;stroke-opacity:1"><tspan id="abo_tspan" x="122.192" y="149.937" style="font-size:26.8111px;text-align:center;text-anchor:middle;stroke-width:1.165;stroke-dasharray:none">O</tspan></text>
        <text xml:space="preserve" x="122.911" y="172.746" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;text-align:center;text-anchor:middle;display:inline;opacity:1;fill:none;fill-opacity:1;stroke:#000;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan13303" x="122.911" y="172.746" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:condensed;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial Condensed&quot;;fill:#000;fill-opacity:1;stroke:none;stroke-width:.265">Additional Information</tspan></text>
        <text xml:space="preserve" x="122.748" y="176.592" style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:condensed;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial Condensed&quot;;text-align:center;text-anchor:middle;display:inline;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan13307" x="122.748" y="176.592" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;stroke-width:.265">D         C         E         c         e</tspan></text>
        <text xml:space="preserve" x="122.976" y="180.166" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:3.175px;font-family:Arial;-inkscape-font-specification:&quot;Arial, Bold&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;display:inline;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan14911" x="122.976" y="180.166">–       –       –        +       +</tspan></text>
        <text xml:space="preserve" x="104.034" y="182.548" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:2.78989px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;text-align:start;text-anchor:start;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.261963;stroke-dasharray:none;stroke-opacity:1" transform="scale(.98854 1.01159)"><tspan id="tspan13344" x="104.034" y="182.548" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:2.78989px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:start;text-anchor:start;stroke-width:.261964">HbS Neg, CMV Neg.</tspan></text>
        <text xml:space="preserve" x="101.805" y="193.373" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:2.85363px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;text-align:start;text-anchor:start;display:inline;fill:#000;fill-opacity:1;stroke:none;stroke-width:.267949;stroke-dasharray:none;stroke-opacity:1" transform="scale(1.01113 .989)"><tspan id="tspan13344-2" x="101.805" y="193.373" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:2.85363px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:start;text-anchor:start;stroke-width:.26795">NEG: HEV,K,Fya,S,M,Cw</tspan></text>
        <text xml:space="preserve" x="105.289" y="192.406" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:3.46143px;font-family:Arial;-inkscape-font-specification:&quot;Arial, Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:start;text-anchor:start;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.260015;stroke-dasharray:none;stroke-opacity:1" transform="scale(.9812 1.01917)"><tspan id="tspan14903" x="105.289" y="192.406" style="stroke-width:.260015">NHSBT – Manchester</tspan></text>
        <text xml:space="preserve" x="117.603" y="210.037" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:2.95275px;font-family:Arial;-inkscape-font-specification:&quot;Arial, Bold&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.277255;stroke-dasharray:none;stroke-opacity:1" transform="scale(1.04625 .9558)"><tspan id="date_bled_tspan" x="117.603" y="210.037" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:2.95275px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:center;text-anchor:middle;stroke-width:.277256">Date Bled: 14 Nov 2022</tspan></text>
        <text xml:space="preserve" x="102.542" y="162.183" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:2.82222px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:center;text-anchor:middle;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1"><tspan id="tspan14917" x="102.542" y="162.183" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:2.82222px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;text-align:start;text-anchor:start;stroke-width:.265">Expiry Date:</tspan></text>
        <text xml:space="preserve" x="115.202" y="165.263" style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:condensed;font-size:4.31514px;font-family:Arial;-inkscape-font-specification:&quot;Arial Bold Condensed&quot;;font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;text-align:start;text-anchor:start;opacity:1;fill:#000;fill-opacity:1;stroke:none;stroke-width:.27012;stroke-dasharray:none;stroke-opacity:1" transform="scale(1.01933 .98104)"><tspan id="expiry_tspan" x="115.202" y="165.263" style="font-size:4.31514px;stroke-width:.270121">19 Dec 2022</tspan></text>
    </g>
        <svg id="cmv_barcode_svg" width="16.738" height="6.175" x="126.432" y="181.468">
        <path d="M0 0h16.738v6.175H0z" style="opacity:1;fill:green;fill-opacity:1;stroke:#000;stroke-width:.264999;stroke-dasharray:none;stroke-opacity:1" />
    </svg>
  </g>
</svg>


        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="55.401638mm" height="52.08931mm" id="product_label_html_based_no_scaling" style="vertical-align:top;">

            <g>
                <rect style="display:inline;opacity:1;fill:#ffffff;fill-opacity:1;stroke:#000000;stroke-width:0.264583mm" id="outline" width="55.401638mm" height="52.08931mm" />
                <path style="opacity:1;fill:none;fill-opacity:1;stroke:#000000;stroke-width:0.264583mm;stroke-opacity:1" d="M 0,123 H 210" id="path10834" inkscape:label="product horizontal line" />
                <switch>
                    <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                        <foreignObject x="0" y="15.8mm" width="55.401638mm" height="7.94mm">
                            <p style="font-family:sans-serif;
				font-size:1.85839mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				margin:0;
				padding-left :1.2mm; padding-right :1.2mm;">
                                Always check patient/component compatibility/identity<br />
                                Inspect pack for signs of deterioration or damage<br />
                                Risk of adverse reaction/infection, Including vCJD
                            </p>
                        </foreignObject>
                        <foreignObject x="0" y="0" width="55.401638mm" height="15.8mm">
                            <p style="font-family:sans-serif;
				font-size:3.175mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				margin:0;
				padding-left :1.2mm; padding-right :1.2mm; padding-top:0.6mm;" id="product_text_fo">
                                RED CELLS IN ADDITIVE SOLUTION, LD FOR NEONATAL USE
                            </p>
                            <p style="font-family:sans-serif;
				font-size:2.82222mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				margin:0;
				padding-left:1.2mm; padding-right: 1.2mm;" id="storage_text_fo">
                                STORE AT 4°C ± 2°C
                            </p>
                        </foreignObject>
                        <foreignObject x="0" y="23.8mm" width="55.4mm" height="7.94mm">
                            <p style="font-family:sans-serif;
				font-size:3.175mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:right;
				margin:0;
				padding-left :1.2mm; padding-right :5mm;">
                                Volume<br />50 mL
                            </p>
                        </foreignObject>
                        <foreignObject x="0" y="33mm" width="55.401638mm" height="7.94mm">
                            <p style="font-family:sans-serif;
				font-size:1.85839mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				margin:0;
				padding-left :1.2mm; padding-right :1.2mm;">
                                This component was collected in CPD anticoagulant and is<br />
                                suspended in 105 millilitres of additive solution of the<br />
                                following composition.
                            </p>
                        </foreignObject>
                        <foreignObject x="0" y="41.23mm" width="27.7mm" height="15.8mm">
                            <p style="font-family:sans-serif;
				font-size:1.85839mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				margin:0;
				padding-left :1.2mm; padding-right :1.2mm;">
                                Sodium Chloride<br />
                                Adenine<br />
                                Anhydrous Glucose<br />
                                Mannitol
                            </p>
                        </foreignObject>
                        <foreignObject x="26.5mm" y="38.9mm" width="27.7mm" height="15.8mm">
                            <p style="font-family:sans-serif;
				font-size:1.85839mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				margin:0;
				padding-left :1.2mm; padding-right :1.2mm;">
                                mmols/l<br />150.0<br />1.25<br />45.4<br />28.8
                            </p>
                        </foreignObject>
                        <foreignObject x="41.55mm" y="44mm" width="13.85mm" height="15.8mm">
                            <p style="font-family:sans-serif;
				font-size:2.82222mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				margin:0;
				padding-left :1.2mm; padding-right :1.2mm;">
                                DO NOT<br />VENT
                            </p>
                        </foreignObject>
                        <rect style="display:inline;opacity:1;fill:#000000;fill-opacity:1;stroke:none;" id="pack_background_fo" width="17mm" height="4mm" x="35mm" y="23.8mm" />
                        <foreignObject x="35mm" y="23.8mm" width="17mm" height="4mm">
                            <p style="font-family:sans-serif;
				font-size:3.175mm;
				font-weight:bold;
				font-stretch:condensed;
				text-align:left;
				color:#FFFFFF;
				margin:0;
				padding-left :1.2mm; padding-right :1.2mm;" id="pack_text_fo">
                                PACK 05
                            </p>
                        </foreignObject>
                    </g>
                    <text>Your SVG viewer cannot display html.</text>
                </switch>



                <svg id="product_barcode_svg_3" width="24.019293mm" height="7.9508266mm" x="1.2mm" y="23.8mm">
                    <!-- <rect style="opacity:1;fill:green;stroke:#000000;stroke-width:0.264583mm" id="product_barcode_placeholder" width="100%" height="100%" /> -->
                </svg>
            </g>
        </svg>

    </div>
</body>
</html>
